<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="EntglDb.Test.Maui.MainPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml">

    <Grid RowDefinitions="Auto,*,Auto">
        <!--  Header  -->
        <Border
            Grid.Row="0"
            Padding="15"
            BackgroundColor="#f0f0f0"
            Stroke="Transparent"
            StrokeThickness="0">
            <HorizontalStackLayout Spacing="20">
                <Label
                    FontAttributes="Bold"
                    FontSize="18"
                    Text="EntglDb Dashboard"
                    VerticalOptions="Center" />
                <Label
                    x:Name="NodeIdLabel"
                    Text="Node: Loading..."
                    VerticalOptions="Center" />
                <Label
                    x:Name="PortLabel"
                    Text="Port: ..."
                    VerticalOptions="Center" />
            </HorizontalStackLayout>
        </Border>

        <Grid
            Grid.Row="1"
            Margin="10"
            ColumnDefinitions="250, *">
            <!--  Left Side: Actions  -->
            <VerticalStackLayout
                Grid.Column="0"
                Margin="0,0,10,0"
                Spacing="10">
                <Label
                    Margin="0,0,0,5"
                    FontAttributes="Bold"
                    Text="Actions" />

                <Border
                    Padding="10"
                    Stroke="#e0e0e0"
                    StrokeThickness="1"
                    StrokeShape="RoundRectangle 4">
                    <VerticalStackLayout Spacing="5">
                        <Label
                            FontAttributes="Bold"
                            FontSize="12"
                            Text="Manual Entry" />
                        <Entry x:Name="KeyEntry" Placeholder="Key" />
                        <Entry x:Name="ValueEntry" Placeholder="Value" />
                        <Grid ColumnDefinitions="*,*">
                            <Button
                                Margin="0,0,2,0"
                                Clicked="OnSaveClicked"
                                HorizontalOptions="Fill"
                                Text="Put" />
                            <Button
                                Grid.Column="1"
                                Margin="2,0,0,0"
                                Clicked="OnLoadClicked"
                                HorizontalOptions="Fill"
                                Text="Get" />
                        </Grid>
                    </VerticalStackLayout>
                </Border>

                <Button
                    Clicked="OnAutoDataClicked"
                    HorizontalOptions="Fill"
                    Text="Generate Auto Data" />
                <Button
                    Clicked="OnSpamClicked"
                    HorizontalOptions="Fill"
                    Text="Spam 5 Records" />
                <Button
                    Clicked="OnCountClicked"
                    HorizontalOptions="Fill"
                    Text="Count Documents" />

                <Label
                    Margin="0,10,0,5"
                    FontAttributes="Bold"
                    Text="Status" />
                <Label
                    x:Name="StatusLabel"
                    LineBreakMode="WordWrap"
                    Text="Ready"
                    TextColor="Green" />
            </VerticalStackLayout>

            <!--  Right Side: Peers & Results  -->
            <Grid Grid.Column="1" RowDefinitions="*, 5, *">

                <!--  Peers List  -->
                <Border
                    Grid.Row="0"
                    Padding="5"
                    Stroke="#e0e0e0"
                    StrokeThickness="1"
                    StrokeShape="RoundRectangle 4">
                    <Grid RowDefinitions="Auto,*,Auto">
                        <Label
                            Margin="5"
                            FontAttributes="Bold"
                            Text="Active Peers (Discovery)" />
                        <CollectionView x:Name="PeersList" Grid.Row="1">
                            <CollectionView.ItemTemplate>
                                <DataTemplate>
                                    <Label Padding="5" Text="{Binding .}" />
                                </DataTemplate>
                            </CollectionView.ItemTemplate>
                        </CollectionView>
                    </Grid>
                </Border>

                <!--  Splitter Simulation  -->
                <BoxView Grid.Row="1" Color="#e0e0e0" />

                <!--  Results Log  -->
                <Border
                    Grid.Row="2"
                    Padding="5"
                    Stroke="#e0e0e0"
                    StrokeThickness="1"
                    StrokeShape="RoundRectangle 4">
                    <Grid RowDefinitions="Auto,*,Auto">
                        <HorizontalStackLayout Spacing="10">
                            <Label
                                Margin="5"
                                FontAttributes="Bold"
                                Text="Logs &amp; Results" />
                            <Button
                                Padding="5,0"
                                Clicked="OnClearLogsClicked"
                                FontSize="10"
                                HeightRequest="30"
                                Text="Clear" />
                        </HorizontalStackLayout>
                        <Editor
                            x:Name="ResultLog"
                            Grid.Row="1"
                            IsReadOnly="True" />
                    </Grid>
                </Border>
            </Grid>

            <!-- Footer: Compact Grid with Fixed Heights -->
            <Grid Grid.Row="2" Padding="8" BackgroundColor="#fafafa" RowDefinitions="30,32" ColumnSpacing="8">
                <HorizontalStackLayout Grid.Row="0" Spacing="8" HorizontalOptions="Center">
                    <Label Text="??" FontAttributes="Bold" TextColor="Green" VerticalOptions="Center" HeightRequest="30"/>
                    <Label Text="Resolver:" FontSize="12" VerticalOptions="Center" HeightRequest="30"/>
                    <RadioButton x:Name="LwwRadio" Content="LWW" GroupName="Resolver" FontSize="12" HeightRequest="30"/>
                    <RadioButton x:Name="MergeRadio" Content="Merge" GroupName="Resolver" IsChecked="True" FontSize="12" HeightRequest="30"/>
                </HorizontalStackLayout>
                <HorizontalStackLayout Grid.Row="1" Spacing="8" HorizontalOptions="Center">
                    <Button Text="?? Save" Clicked="OnSaveResolverClicked" Padding="6,2" FontSize="12" HeightRequest="32" WidthRequest="70"/>
                    <Button Text="?? Lists" Clicked="OnShowTodoListsClicked" Padding="6,2" FontSize="12" HeightRequest="32" WidthRequest="70"/>
                    <Button Text="?? Demo" Clicked="OnRunConflictDemoClicked" Padding="6,2" FontSize="12" HeightRequest="32" WidthRequest="70"/>
                </HorizontalStackLayout>
            </Grid>
        </Grid>
    </Grid>

</ContentPage>

